<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æ¯æ—¥é¥®é£ŸæŠ½å¡</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f9f8f1; /* ç±³ç™½ */
      color: #2e5939; /* æ·±ç»¿è‰² */
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
    }
    h1 {
      color: #4caf50; /* å¥åº·ç»¿è‰² */
    }
    button {
      padding: 1rem 2rem;
      background-color: #a8d5ba;
      border: none;
      border-radius: 8px;
      font-size: 1.2rem;
      cursor: pointer;
      margin-top: 1rem;
    }
    #card {
      margin-top: 2rem;
      padding: 1.5rem;
      background-color: #ffffff;
      border: 2px solid #c8e6c9;
      border-radius: 10px;
      max-width: 400px;
      text-align: left;
    }
  </style>
</head>
<body>
  <h1>ğŸŒ± æ¯æ—¥é¥®é£ŸæŠ½å¡</h1>
  <div id="card">ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®å¼€å§‹æŠ½å¡ï¼</div>
  <button onclick="drawCard()">æŠ½ä¸€å¼ å¡</button>

  <script>
    const cards = {
      R: [
        { name: 'é»‘æ¤’é¸¡èƒ¸è‚‰ç‚’ç”œæ¤’', ingredients: 'é¸¡èƒ¸150gï¼Œçº¢é»„æ¤’å„50gï¼Œæ´‹è‘±30g', cal: '350 kcal' },
        { name: 'é…±é¦™çƒ¤é¸¡è…¿æ’', ingredients: 'é¸¡è…¿å¸¦çš®200gï¼Œèœ‚èœœ5gï¼Œé…±æ²¹', cal: '430 kcal' },
        // ... å…±20å¼ Rå¡
      ],
      SR: [
        { name: 'ç•ªèŒ„é¸¡è›‹é¢', ingredients: 'ç•ªèŒ„150gï¼Œé¸¡è›‹2ä¸ªï¼Œé¢æ¡100g', cal: '520 kcalï¼Œå¿«èµ°40åˆ†é’ŸæŠµæ¶ˆ' },
        { name: 'å°å¼å¤è‚‰é¥­', ingredients: 'çŒªè‚‰æœ«120gï¼Œç±³é¥­100gï¼Œå¤è›‹1ä¸ª', cal: '650 kcalï¼Œæ…¢è·‘30åˆ†é’ŸæŠµæ¶ˆ' },
        // ... å…±20å¼ SRå¡
      ],
      SSR: [
        { name: 'å¯¿å¸æ‹¼ç›˜', cuisine: 'æ—¥æœ¬æ–™ç†', budget: '$22' },
        { name: 'éº»è¾£é¦™é”…', cuisine: 'å·èœ', budget: '$20' },
        // ... å…±20å¼ SSRå¡
      ]
    };

    let drawCount = 0;
    const limit = 2;
    const resetHour = 12; // æ¯12å°æ—¶åˆ·æ–°
    const lastDrawKey = 'lastDraw';
    const drawCountKey = 'drawCount';

    function drawCard() {
      const now = new Date();
      const lastDraw = new Date(localStorage.getItem(lastDrawKey) || 0);
      const hoursSinceLast = (now - lastDraw) / 36e5;

      if (hoursSinceLast >= resetHour) {
        localStorage.setItem(drawCountKey, '0');
        drawCount = 0;
      } else {
        drawCount = parseInt(localStorage.getItem(drawCountKey) || '0');
      }

      if (drawCount >= limit) {
        document.getElementById('card').innerText = 'ä½ ä»Šå¤©å·²ç»æŠ½è¿‡2æ¬¡å¡å•¦ï¼è¯·12å°æ—¶åå†è¯•ã€‚';
        return;
      }

      const rand = Math.random();
      let pool = 'R';
      if (rand < 0.1) pool = 'SSR';
      else if (rand < 0.4) pool = 'SR';

      const cardList = cards[pool];
      const card = cardList[Math.floor(Math.random() * cardList.length)];

      let display = '';
      if (pool === 'SSR') {
        display = `â­ SSRÂ·åˆ«ç®¡æˆ‘äº†å¡\nã€å¤–é£Ÿã€‘${card.name}\nèœç³»ï¼š${card.cuisine}\né¢„ç®—ï¼š${card.budget}`;
      } else {
        const title = pool === 'R' ? 'RÂ·å¥åº·é¥®é£Ÿå¡' : 'SRÂ·ç¢³æ°´ä¿å‘½å¡';
        display = `ğŸ± ${title}\nã€èœåã€‘${card.name}\nã€é£Ÿæã€‘${card.ingredients}\nã€çƒ­é‡ã€‘${card.cal}`;
      }

      document.getElementById('card').innerText = display;
      drawCount++;
      localStorage.setItem(drawCountKey, drawCount);
      localStorage.setItem(lastDrawKey, now.toISOString());
    }
  </script>
</body>
</html>
